import{d as N,y as q,t as M,D as H,n as B,ac as T,o as p,b as m,i as d,e as w,x as L}from"../modules/vue-p3csHQEQ.js";import{C as D,_ as I}from"../index-k5A0SBRt.js";const P=["innerHTML"],$=["textContent"],K=["textContent"],k="slidev-note-fade",r="slidev-note-click-mark",R=N({__name:"NoteDisplay",props:{class:{type:String,required:!1},noteHtml:{type:String,required:!1},note:{type:String,required:!1},placeholder:{type:String,required:!1},clicksContext:{type:null,required:!1},autoScroll:{type:Boolean,required:!1}},emits:["markerDblclick","markerClick"],setup(E,{emit:b}){const n=E,v=b,g=q(()=>{var s;return n.clicksContext!=null&&((s=n.noteHtml)==null?void 0:s.includes("slidev-note-click-mark"))}),a=M(null);function h(){var x;if(!a.value||!g.value)return;const s=Array.from(a.value.querySelectorAll(`.${r}`)),l=+(((x=n.clicksContext)==null?void 0:x.current)??D),c=l<0||l>=D,y=new Set;function C(e){!e||e===a.value||(y.add(e),e.parentElement&&C(e.parentElement))}const _=new Map;for(const e of s){const t=e.parentElement,o=Number(e.dataset.clicks);_.set(o,e),C(t),Array.from(t.childNodes).forEach(f=>{if(f.nodeType===3){const S=document.createElement("span");S.textContent=f.textContent,t.insertBefore(S,f),f.remove()}})}const A=Array.from(a.value.querySelectorAll("*"));let i=0;const u=new Map;for(const e of A)u.has(i)||u.set(i,[]),u.get(i).push(e),e.classList.contains(r)&&(i=Number(e.dataset.clicks)||i+1);for(const[e,t]of u)c?t.forEach(o=>o.classList.remove(k)):t.forEach(o=>o.classList.toggle(k,y.has(o)?!1:e!==l));for(const[e,t]of _)t.classList.remove(k),t.classList.toggle(`${r}-past`,c?!1:e<l),t.classList.toggle(`${r}-active`,c?!1:e===l),t.classList.toggle(`${r}-next`,c?!1:e===l+1),t.classList.toggle(`${r}-future`,c?!1:e>l+1),t.ondblclick=o=>{v("markerDblclick",o,e),!o.defaultPrevented&&(n.clicksContext.current=e,o.stopPropagation(),o.stopImmediatePropagation())},t.onclick=o=>{v("markerClick",o,e)},n.autoScroll&&e===l&&t.scrollIntoView({block:"center",behavior:"smooth"})}return H(()=>{var s;return[n.noteHtml,(s=n.clicksContext)==null?void 0:s.current]},()=>{B(()=>{h()})},{immediate:!0}),T(()=>{h()}),(s,l)=>s.noteHtml?(p(),m("div",{key:0,ref_key:"noteDisplay",ref:a,class:d(["prose overflow-auto outline-none slidev-note",[n.class,g.value?"slidev-note-with-clicks":""]]),innerHTML:s.noteHtml},null,10,P)):s.note?(p(),m("div",{key:1,class:d(["prose overflow-auto outline-none slidev-note",n.class])},[w("p",{textContent:L(s.note)},null,8,$)],2)):(p(),m("div",{key:2,class:d(["prose overflow-auto outline-none opacity-50 italic select-none slidev-note",n.class])},[w("p",{textContent:L(n.placeholder||"No notes.")},null,8,K)],2))}}),F=I(R,[["__file","/Users/kalongchan/Downloads/Excel and Power BI Training/excel_power_bi_training/node_modules/@slidev/client/internals/NoteDisplay.vue"]]);export{F as N};
