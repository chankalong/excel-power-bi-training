import{d as te,e as ne,_ as oe,f as le,g as se}from"../modules/unplugin-icons-xu7CGyJ7.js";import{d as X,a7 as ae,a8 as ie,t as B,a9 as re,D as L,C as ce,a0 as de,n as G,A as r,o as a,c as x,i as y,h as F,aa as ue,ab as me,b as k,j as pe,J as ve,y as A,ac as fe,e as i,F as P,ad as j,k as I,g as T,x as b,l as g}from"../modules/vue-p3csHQEQ.js";import{_ as Q,u as he,a as ge,s as ke,c as _e,C as O,i as be,b as R,t as xe,g as q}from"../index-fY6EWHD-.js";import{u as we,S as ye,D as Ce,a as De}from"./DrawingPreview-DFEKRiuA.js";import{I as W}from"./IconButton-BOsQXkqs.js";import{N as $e}from"./NoteDisplay-BA_7Qtki.js";import{C as Se}from"./ClicksSlider-BI322AgC.js";import"../modules/shiki-eFrDgDAP.js";const Ee=["placeholder"],Ne=X({__name:"NoteEditable",props:{no:{type:Number,required:!0},class:{default:""},editing:{default:!1},style:{default:()=>({})},placeholder:{default:"No notes for this slide"},clicksContext:{type:Object},autoHeight:{default:!1}},emits:["update:editing","markerDblclick","markerClick"],setup(w,{emit:U}){const l=w,_=U,u=ae(l,"editing",_,{passive:!0}),{info:v,update:C}=we(ie(l,"no")),f=B("");let D;const{ignoreUpdates:$}=re(f,m=>{if(!u.value)return;const c=l.no;clearTimeout(D),D=setTimeout(()=>{C({note:m},c)},500)});L(()=>{var m;return(m=v.value)==null?void 0:m.note},(m="")=>{u.value||(clearTimeout(D),$(()=>{f.value=m}))},{immediate:!0,flush:"sync"});const s=B(),S=B();ce(()=>{var m;u.value&&((m=s.value)==null||m.focus())}),de(s,()=>{u.value=!1});function z(){!l.autoHeight||!s.value||!u.value||s.value.scrollHeight>s.value.clientHeight&&(s.value.style.height=`${s.value.scrollHeight}px`)}return L([f,u],()=>{G(()=>{z()})},{flush:"post",immediate:!0}),(m,c)=>{var E;return r(u)?ue((a(),k("textarea",{key:1,ref_key:"inputEl",ref:s,"onUpdate:modelValue":c[2]||(c[2]=h=>f.value=h),class:y(["prose resize-none overflow-auto outline-none bg-transparent block border-primary border-2",l.class]),style:F([{"line-height":"1.75"},[l.style,S.value!=null?{height:`${S.value}px`}:{}]]),placeholder:w.placeholder,onKeydown:c[3]||(c[3]=pe(h=>u.value=!1,["esc"]))},null,46,Ee)),[[me,f.value]]):(a(),x($e,{key:0,class:y(["border-transparent border-2",[l.class,f.value?"":"opacity-25 italic select-none"]]),style:F(l.style),note:f.value||w.placeholder,"note-html":(E=r(v))==null?void 0:E.noteHTML,"clicks-context":w.clicksContext,"auto-scroll":!w.autoHeight,onMarkerClick:c[0]||(c[0]=(h,N)=>_("markerClick",h,N)),onMarkerDblclick:c[1]||(c[1]=(h,N)=>_("markerDblclick",h,N))},null,8,["class","style","note","note-html","clicks-context","auto-scroll"]))}}}),Me=Q(Ne,[["__file","/Users/kalongchan/programmer/excel-power-bi-training/node_modules/@slidev/client/internals/NoteEditable.vue"]]),He={class:"h-screen w-screen of-hidden flex"},Ie={class:"grid grid-rows-[auto_max-content] border-r border-main select-none max-h-full h-full"},Te={class:"relative"},Be={class:"absolute left-0 top-0 bottom-0 w-200 flex flex-col flex-auto items-end group p2 gap-1 max-h-full of-x-visible of-y-auto",style:{direction:"rtl"}},Ve=["onClick"],We={p2:"",border:"t main"},Ue={class:"select-none w-13 text-right my4 flex flex-col gap-1 items-end"},ze={class:"text-3xl op20 mb2"},Ae={class:"flex flex-col gap-2 my5"},Oe=["onDblclick"],Fe={class:"py3 mt-0.5 mr--8 ml--4 op0 transition group-hover:op100"},Ke={key:0,class:"select-none absolute bottom-0 right-0 bg-main rounded-tl p2 op35 text-xs"},Le={class:"absolute top-0 right-0 px3 py1.5 border-b border-l rounded-lb bg-main border-main select-none"},Pe={class:"text-xs op50"},J=450,je=X({__name:"overview",setup(w){he({title:`Overview - ${ke}`});const{openInEditor:U,slides:l}=ge(),_=ve(new Map),u=B([]),v=B(null),C=A(()=>l.value.map(t=>{var e,o;return z(((o=(e=t.meta)==null?void 0:e.slide)==null?void 0:o.note)||"")})),f=A(()=>C.value.reduce((t,e)=>t+e,0)),D=A(()=>l.value.map(t=>S(t)).reduce((t,e)=>t+e,0)),$=new WeakMap;function s(t){return $.has(t)||$.set(t,_e(t,O)),$.get(t)}function S(t){var e,o;return((e=t.meta)==null?void 0:e.clicks)||((o=s(t))==null?void 0:o.total)}function z(t){var e;return((e=t.match(/[\w\d\’\'-]+/gi))==null?void 0:e.length)||0}function m(t){const e=t.getBoundingClientRect(),o=20;return e.top>=0-o&&e.left>=0-o&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)+o&&e.right<=(window.innerWidth||document.documentElement.clientWidth)+o}function c(){const t=[];Array.from(_.entries()).forEach(([e,o])=>{m(o)&&t.push(e)}),u.value=t}function E(t){const e=document.createElement("a");e.target="_blank",e.href=t,e.click()}function h(t){const e=_.get(t);e&&e.scrollIntoView({behavior:"smooth",block:"start"})}function N(t,e,o){const M=s(o);M.current===e?M.current=O:M.current=e,t.preventDefault()}return fe(()=>{G(()=>{c()})}),(t,e)=>{const o=te,M=ne,Y=oe,Z=le,ee=se;return a(),k("div",He,[i("nav",Ie,[i("div",Te,[i("div",Be,[(a(!0),k(P,null,j(r(l),(n,p)=>{var H,d,V,K;return a(),k("div",{key:n.no,class:"relative",style:{direction:"ltr"}},[i("button",{class:y(["relative transition duration-300 w-8 h-8 rounded hover:bg-active hover:op100",u.value.includes(p)?"op100 text-primary bg-gray:5":"op20"]),onClick:Re=>h(p)},[i("div",null,b(p+1),1)],10,Ve),(d=(H=n.meta)==null?void 0:H.slide)!=null&&d.title?(a(),k("div",{key:0,class:y(["pointer-events-none select-none absolute left-110% backdrop-blur-8 top-50% translate-y--50% ws-nowrap z-10 px2 shadow-xl rounded border border-main transition duration-400 op0 group-hover:op100",u.value.includes(p)?"text-primary":"text-main important-text-op-50"])},b((K=(V=n.meta)==null?void 0:V.slide)==null?void 0:K.title),3)):T("v-if",!0)])}),128))])]),i("div",We,[r(be)?T("v-if",!0):(a(),x(W,{key:0,title:r(R)?"Switch to light mode theme":"Switch to dark mode theme",onClick:e[0]||(e[0]=n=>r(xe)())},{default:I(()=>[r(R)?(a(),x(o,{key:0})):(a(),x(M,{key:1}))]),_:1},8,["title"]))])]),i("main",{class:"flex-1 h-full of-auto",style:F(`grid-template-columns: repeat(auto-fit,minmax(${J}px,1fr))`),onScroll:c},[(a(!0),k(P,null,j(r(l),(n,p)=>{var H;return a(),k("div",{key:n.no,ref_for:!0,ref:d=>_.set(p,d),class:y(["relative border-t border-main of-hidden flex gap-4 min-h-50 group",p===0?"pt5":""])},[i("div",Ue,[i("div",ze,b(p+1),1),g(W,{class:"mr--3 op0 group-hover:op80",title:"Play in new tab",onClick:d=>E(r(q)(n,!1))},{default:I(()=>[g(Y)]),_:2},1032,["onClick"]),(H=n.meta)!=null&&H.slide?(a(),x(W,{key:0,class:"mr--3 op0 group-hover:op80",title:"Open in editor",onClick:d=>r(U)(`${n.meta.slide.filepath}:${n.meta.slide.start}`)},{default:I(()=>[g(Z)]),_:2},1032,["onClick"])):T("v-if",!0)]),i("div",Ae,[i("div",{class:"border rounded border-main overflow-hidden bg-main select-none h-max",onDblclick:d=>E(r(q)(n,!1))},[(a(),x(De,{key:n.no,width:J,class:"pointer-events-none important:[&_*]:select-none"},{default:I(()=>[g(ye,{"clicks-context":s(n),route:n,"render-context":"overview"},null,8,["clicks-context","route"]),g(Ce,{page:n.no},null,8,["page"])]),_:2},1024))],40,Oe),S(n)?(a(),x(Se,{key:0,"clicks-context":s(n),class:"w-full mt-2",onDblclick:d=>s(n).current=r(O)},null,8,["clicks-context","onDblclick"])):T("v-if",!0)]),i("div",Fe,[g(W,{title:"Edit Note",class:y(["rounded-full w-9 h-9 text-sm",v.value===n.no?"important:op0":""]),onClick:d=>v.value=n.no},{default:I(()=>[g(ee)]),_:2},1032,["class","onClick"])]),g(Me,{no:n.no,class:"max-w-250 w-250 text-lg rounded p3","auto-height":!0,editing:v.value===n.no,"clicks-context":s(n),onDblclick:d=>v.value!==n.no?v.value=n.no:null,"onUpdate:editing":e[1]||(e[1]=d=>v.value=null),onMarkerClick:(d,V)=>N(d,V,n)},null,8,["no","editing","clicks-context","onDblclick","onMarkerClick"]),C.value[p]>0?(a(),k("div",Ke,b(C.value[p])+" words ",1)):T("v-if",!0)],2)}),128))],36),i("div",Le,[i("div",Pe,b(r(l).length)+" slides · "+b(D.value+r(l).length-1)+" clicks · "+b(f.value)+" words ",1)])])}}}),tt=Q(je,[["__file","/Users/kalongchan/programmer/excel-power-bi-training/node_modules/@slidev/client/pages/overview.vue"]]);export{tt as default};
